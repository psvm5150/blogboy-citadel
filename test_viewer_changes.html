<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Viewer Changes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .success {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
    </style>
</head>
<body>
    <h1>Viewer Changes Test Results</h1>
    
    <div class="test-section" id="config-test">
        <h3>1. Config Key Change Test</h3>
        <p>Testing if "site_author" has been changed to "global_author"...</p>
        <div id="config-result"></div>
    </div>
    
    <div class="test-section" id="js-test">
        <h3>2. JavaScript Changes Test</h3>
        <p>Testing if JavaScript uses the new config key...</p>
        <div id="js-result"></div>
    </div>
    
    <div class="test-section" id="css-test">
        <h3>3. CSS Changes Test</h3>
        <p>Testing if CSS has been updated with new styling...</p>
        <div id="css-result"></div>
    </div>

    <script>
        async function testConfigChange() {
            try {
                const response = await fetch('./properties/viewer-config.json');
                const config = await response.json();
                
                const resultDiv = document.getElementById('config-result');
                if (config.global_author && !config.site_author) {
                    resultDiv.innerHTML = '<span style="color: green;">✓ SUCCESS: Config key changed from "site_author" to "global_author"</span>';
                    resultDiv.parentElement.classList.add('success');
                } else {
                    resultDiv.innerHTML = '<span style="color: red;">✗ FAILED: Config key not properly changed</span>';
                    resultDiv.parentElement.classList.add('error');
                }
            } catch (error) {
                document.getElementById('config-result').innerHTML = '<span style="color: red;">✗ ERROR: ' + error.message + '</span>';
                document.getElementById('config-test').classList.add('error');
            }
        }

        async function testJavaScriptChanges() {
            try {
                const response = await fetch('./js/viewer.js');
                const jsContent = await response.text();
                
                const resultDiv = document.getElementById('js-result');
                const hasGlobalAuthor = jsContent.includes('config.global_author');
                const noSiteAuthor = !jsContent.includes('config.site_author');
                
                if (hasGlobalAuthor && noSiteAuthor) {
                    resultDiv.innerHTML = '<span style="color: green;">✓ SUCCESS: JavaScript updated to use "global_author"</span>';
                    resultDiv.parentElement.classList.add('success');
                } else {
                    resultDiv.innerHTML = '<span style="color: red;">✗ FAILED: JavaScript not properly updated</span>';
                    resultDiv.parentElement.classList.add('error');
                }
            } catch (error) {
                document.getElementById('js-result').innerHTML = '<span style="color: red;">✗ ERROR: ' + error.message + '</span>';
                document.getElementById('js-test').classList.add('error');
            }
        }

        async function testCSSChanges() {
            try {
                const response = await fetch('./css/viewer.css');
                const cssContent = await response.text();
                
                const resultDiv = document.getElementById('css-result');
                const hasBoxShadow = cssContent.includes('box-shadow: 0 2px 8px');
                const hasReducedHeight = cssContent.includes('min-height: 1.875rem');
                const hasIncreasedGap = cssContent.includes('gap: 3rem');
                const noBorder = !cssContent.includes('border: 1px solid #e9ecef');
                
                if (hasBoxShadow && hasReducedHeight && hasIncreasedGap && noBorder) {
                    resultDiv.innerHTML = '<span style="color: green;">✓ SUCCESS: CSS updated with shadow, reduced height, increased gap, and no border</span>';
                    resultDiv.parentElement.classList.add('success');
                } else {
                    resultDiv.innerHTML = '<span style="color: red;">✗ FAILED: CSS not properly updated</span>';
                    resultDiv.parentElement.classList.add('error');
                }
            } catch (error) {
                document.getElementById('css-result').innerHTML = '<span style="color: red;">✗ ERROR: ' + error.message + '</span>';
                document.getElementById('css-test').classList.add('error');
            }
        }

        // Run tests
        testConfigChange();
        testJavaScriptChanges();
        testCSSChanges();
    </script>
</body>
</html>